{"ast":null,"code":"import React, { Component, useState, useEffect, useRef } from 'react';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\n\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\n\nfunction osm(x, y, z) {\n  var s = String.fromCharCode(97 + (x + y + z) % 3);\n  return \"https://\" + s + \".tile.openstreetmap.org/\" + z + \"/\" + x + \"/\" + y + \".png\";\n}\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {\n  return true;\n};\n\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\n\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = function requestAnimationFrame(callback) {\n  if (hasWindow) {\n    return (window.requestAnimationFrame || window.setTimeout)(callback);\n  } else {\n    callback(new Date().getTime());\n    return null;\n  }\n};\n\nvar cancelAnimationFrame = function cancelAnimationFrame(animFrame) {\n  return hasWindow && animFrame ? (window.cancelAnimationFrame || window.clearTimeout)(animFrame) : false;\n};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : \" \" + dpr + \"x\");\n  }).join(', ');\n}\n\nvar ImgTile = function ImgTile(_ref) {\n  var tile = _ref.tile,\n      tileLoaded = _ref.tileLoaded;\n  return /*#__PURE__*/React.createElement(\"img\", {\n    src: tile.url,\n    srcSet: tile.srcSet,\n    width: tile.width,\n    height: tile.height,\n    loading: 'lazy',\n    onLoad: tileLoaded,\n    alt: '',\n    style: {\n      position: 'absolute',\n      left: tile.left,\n      top: tile.top,\n      willChange: 'transform',\n      transformOrigin: 'top left',\n      opacity: 1\n    }\n  });\n};\n\nvar Map = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Map, _Component);\n\n  function Map(props) {\n    var _ref2, _props$defaultZoom, _ref3, _props$defaultCenter, _ref4, _props$width, _ref5, _props$height;\n\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"_containerRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mousePosition\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_loadTracker\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_dragStart\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mouseDown\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_moveEvents\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastClick\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastTap\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastWheel\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_touchStartPixel\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_touchStartMidPoint\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_touchStartDistance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_secondTouchEnd\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_warningClearTimeout\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_isAnimating\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_animationStart\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_animationEnd\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomStart\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_centerTarget\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomTarget\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomAround\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_animFrame\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_boundsSynced\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_minMaxCache\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastZoom\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastCenter\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_centerStart\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_resizeObserver\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"updateWidthHeight\", function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n\n          return true;\n        }\n      }\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"wa\", function () {\n      var _window;\n\n      return (_window = window).addEventListener.apply(_window, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"wr\", function () {\n      var _window2;\n\n      return (_window2 = window).removeEventListener.apply(_window2, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindMouseEvents\", function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n\n      _this.wa('mouseup', _this.handleMouseUp);\n\n      _this.wa('mousemove', _this.handleMouseMove);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindTouchEvents\", function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindMouseEvents\", function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n\n      _this.wr('mouseup', _this.handleMouseUp);\n\n      _this.wr('mousemove', _this.handleMouseMove);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindTouchEvents\", function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n\n      _this.wr('touchmove', _this.handleTouchMove);\n\n      _this.wr('touchend', _this.handleTouchEnd);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindResizeEvent\", function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindResizeEvent\", function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindWheelEvent\", function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindWheelEvent\", function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCenterZoomTarget\", function (center, zoom, fromProps, zoomAround, animationDuration) {\n      if (fromProps === void 0) {\n        fromProps = false;\n      }\n\n      if (zoomAround === void 0) {\n        zoomAround = null;\n      }\n\n      if (animationDuration === void 0) {\n        animationDuration = ANIMATION_TIME;\n      }\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center || _this.state.center, zoom, fromProps);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCenterZoomForChildren\", function (center, zoom) {\n      _this.setCenterZoomTarget(center || _this.state.center, zoom || _this.state.zoom, true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"distanceInScreens\", function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n      return Math.sqrt(w * w + h * h);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"animationStep\", function (timestamp) {\n      if (!_this._animationEnd || !_this._animationStart || !_this._zoomTarget || !_this._zoomStart || !_this._centerStart || !_this._centerTarget) {\n        return {\n          centerStep: _this.state.center,\n          zoomStep: _this.state.zoom\n        };\n      }\n\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"animate\", function (timestamp) {\n      if (!_this._animationEnd || timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopAnimating\", function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n\n        _this.onAnimationStop();\n\n        cancelAnimationFrame(_this._animFrame);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"limitCenterAtZoom\", function (center, zoom) {\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(!center || isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(!center || isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAnimationStart\", function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAnimationStop\", function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCenterZoom\", function (center, zoom, animationEnded) {\n      if (animationEnded === void 0) {\n        animationEnded = false;\n      }\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (zoom && Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + \"-\" + y + \"-\" + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom || _this.state.zoom\n      }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n\n      if (zoom && (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001)) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBoundsMinMax\", function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom);\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom);\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom);\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom);\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tileLoaded\", function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.values(_this._loadTracker).filter(function (v) {\n          return !v;\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchStart\", function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchMove\", function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel && _this._touchStartMidPoint && _this._touchStartDistance) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchEnd\", function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget;\n\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseDown\", function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          if (!parentHasClass(event.target, 'pigeon-click-block')) {\n            var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n\n            _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n          }\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseMove\", function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseUp\", function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n\n      var pixelDelta = _this.state.pixelDelta;\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n\n          _this.setState({\n            pixelDelta: undefined\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopTrackingMoveEvents\", function () {\n      _this._moveEvents = [];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"trackMoveEvents\", function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"throwAfterMoving\", function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"sendDeltaChange\", function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: undefined,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBounds\", function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"syncToProps\", function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.state.zoom;\n      }\n\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheel\", function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey || event.ctrlKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showWarning\", function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearWarning\", function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomAroundMouse\", function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomPlusDelta\", function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pixelToLatLng\", function (pixel, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"latLngToPixel\", function (latLng, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"calculateZoomCenter\", function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRef\", function (dom) {\n      _this._containerRef = dom;\n    });\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._lastZoom = (_ref2 = (_props$defaultZoom = props.defaultZoom) !== null && _props$defaultZoom !== void 0 ? _props$defaultZoom : props.zoom) !== null && _ref2 !== void 0 ? _ref2 : 14;\n    _this._lastCenter = (_ref3 = (_props$defaultCenter = props.defaultCenter) !== null && _props$defaultCenter !== void 0 ? _props$defaultCenter : props.center) !== null && _ref3 !== void 0 ? _ref3 : [0, 0];\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: (_ref4 = (_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : props.defaultWidth) !== null && _ref4 !== void 0 ? _ref4 : -1,\n      height: (_ref5 = (_props$height = props.height) !== null && _props$height !== void 0 ? _props$height : props.defaultHeight) !== null && _ref5 !== void 0 ? _ref5 : -1,\n      zoomDelta: 0,\n      pixelDelta: undefined,\n      oldTiles: [],\n      showWarning: false,\n      warningType: undefined\n    };\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n\n      this.bindResizeEvent();\n    }\n\n    this.bindWheelEvent();\n    this.syncToProps();\n\n    if (typeof window.ResizeObserver !== 'undefined') {\n      this._resizeObserver = new window.ResizeObserver(function () {\n        _this2.updateWidthHeight();\n      });\n\n      this._resizeObserver.observe(this._containerRef);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n    this.unbindWheelEvent();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _prevProps$center;\n\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      return;\n    }\n\n    if ((!this.props.center || this.props.center[0] === (prevProps === null || prevProps === void 0 ? void 0 : (_prevProps$center = prevProps.center) === null || _prevProps$center === void 0 ? void 0 : _prevProps$center[0]) && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    if (currentCenter && currentZoom) {\n      var _this$props$center, _this$props$zoom;\n\n      var nextCenter = (_this$props$center = this.props.center) !== null && _this$props$center !== void 0 ? _this$props$center : currentCenter;\n      var nextZoom = (_this$props$zoom = this.props.zoom) !== null && _this$props$zoom !== void 0 ? _this$props$zoom : currentZoom;\n\n      if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n        this.setCenterZoomTarget(nextCenter, nextZoom, true);\n      }\n    }\n  };\n\n  _proto.coordsInside = function coordsInside(pixel) {\n    var _this$state10 = this.state,\n        width = _this$state10.width,\n        height = _this$state10.height;\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n\n    if (parent) {\n      var pos = parentPosition(parent);\n      var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n      return parent === element || parent.contains(element);\n    } else {\n      return false;\n    }\n  };\n\n  _proto.tileValues = function tileValues(_ref6) {\n    var center = _ref6.center,\n        zoom = _ref6.zoom,\n        pixelDelta = _ref6.pixelDelta,\n        zoomDelta = _ref6.zoomDelta,\n        width = _ref6.width,\n        height = _ref6.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  _proto.renderTiles = function renderTiles() {\n    var _this3 = this;\n\n    var _this$state11 = this.state,\n        oldTiles = _this$state11.oldTiles,\n        width = _this$state11.width,\n        height = _this$state11.height;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || osm;\n\n    var _this$tileValues = this.tileValues(this.state),\n        tileMinX = _this$tileValues.tileMinX,\n        tileMaxX = _this$tileValues.tileMaxX,\n        tileMinY = _this$tileValues.tileMinY,\n        tileMaxY = _this$tileValues.tileMaxY,\n        tileCenterX = _this$tileValues.tileCenterX,\n        tileCenterY = _this$tileValues.tileCenterY,\n        roundedZoom = _this$tileValues.roundedZoom,\n        scaleWidth = _this$tileValues.scaleWidth,\n        scaleHeight = _this$tileValues.scaleHeight,\n        scale = _this$tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n\n      var _yMin = Math.max(old.tileMinY, 0);\n\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + \"-\" + y + \"-\" + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x = xMin; _x <= xMax; _x++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x + \"-\" + _y + \"-\" + roundedZoom,\n          url: mapUrl(_x, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x, _y, roundedZoom),\n          left: (_x - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\",\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: \"scale(\" + scale + \", \" + scale + \")\",\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || 'pigeon-tiles-box';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: \"translate(\" + left + \"px, \" + top + \"px)\"\n    };\n    var Tile = this.props.tileComponent;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: boxStyle,\n      className: boxClassname\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-tiles\",\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return /*#__PURE__*/React.createElement(Tile, {\n        key: tile.key,\n        tile: tile,\n        tileLoaded: function tileLoaded() {\n          return _this3.tileLoaded(tile.key);\n        }\n      });\n    })));\n  };\n\n  _proto.renderOverlays = function renderOverlays() {\n    var _this4 = this;\n\n    var _this$state12 = this.state,\n        width = _this$state12.width,\n        height = _this$state12.height,\n        center = _this$state12.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (! /*#__PURE__*/React.isValidElement(child)) {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n      var c = _this4.latLngToPixel(anchor || position || center);\n\n      return /*#__PURE__*/React.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this4.latLngToPixel,\n        pixelToLatLng: _this4.pixelToLatLng,\n        setCenterZoom: _this4.setCenterZoomForChildren,\n        mapProps: _this4.props,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-overlays\",\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n\n  _proto.renderAttribution = function renderAttribution() {\n    var _this$props4 = this.props,\n        attribution = _this$props4.attribution,\n        attributionPrefix = _this$props4.attributionPrefix;\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"attr\",\n      className: \"pigeon-attribution\",\n      style: style\n    }, attributionPrefix === false ? null : /*#__PURE__*/React.createElement(\"span\", null, attributionPrefix || /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://pigeon-maps.js.org/\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"Pigeon\"), ' | '), attribution || /*#__PURE__*/React.createElement(\"span\", null, '  ', /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.openstreetmap.org/copyright\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"OpenStreetMap\"), ' contributors'));\n  };\n\n  _proto.renderWarning = function renderWarning() {\n    var _this$props5 = this.props,\n        metaWheelZoom = _this$props5.metaWheelZoom,\n        metaWheelZoomWarning = _this$props5.metaWheelZoomWarning,\n        twoFingerDrag = _this$props5.twoFingerDrag,\n        twoFingerDragWarning = _this$props5.twoFingerDragWarning,\n        warningZIndex = _this$props5.warningZIndex;\n    var _this$state13 = this.state,\n        showWarning = _this$state13.showWarning,\n        warningType = _this$state13.warningType,\n        width = _this$state13.width,\n        height = _this$state13.height;\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '' : 'ctrl';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pigeon-overlay-warning\",\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        touchEvents = _this$props6.touchEvents,\n        twoFingerDrag = _this$props6.twoFingerDrag;\n    var _this$state14 = this.state,\n        width = _this$state14.width,\n        height = _this$state14.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n\n  return Map;\n}(Component);\n\n_defineProperty(Map, \"defaultProps\", {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META + wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: [],\n  tileComponent: ImgTile\n});\n\nfunction Marker(props) {\n  var width = typeof props.width !== 'undefined' ? props.width : typeof props.height !== 'undefined' ? props.height * 29 / 34 : 29;\n  var height = typeof props.height !== 'undefined' ? props.height : typeof props.width !== 'undefined' ? props.width * 34 / 29 : 34;\n\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = typeof props.hover === 'undefined' ? internalHover : props.hover;\n  var color = props.color || '#93C0D0';\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.payload\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + (props.left - width / 2) + \"px, \" + (props.top - (height - 1)) + \"px)\",\n      filter: hover ? 'drop-shadow(0 0 4px rgba(0, 0, 0, .3))' : '',\n      pointerEvents: 'none',\n      cursor: 'pointer'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 61 71\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z\",\n    fill: color,\n    stroke: \"white\",\n    strokeWidth: \"4\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"30.5\",\n    cy: \"30.5\",\n    r: \"8.5\",\n    fill: \"white\",\n    opacity: hover ? 0.98 : 0.6\n  }))));\n}\n\nfunction Overlay(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + props.left + \"px, \" + props.top + \"px)\"\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, props.children);\n}\n\nvar defaultSvgAttributes = {\n  fill: '#93c0d099',\n  strokeWidth: '2',\n  stroke: 'white',\n  r: '30'\n};\n\nfunction PointComponent(props) {\n  var latLngToPixel = props.latLngToPixel;\n  var _props$coordinates = props.coordinates,\n      y = _props$coordinates[0],\n      x = _props$coordinates[1];\n\n  var _latLngToPixel = latLngToPixel([x, y]),\n      cx = _latLngToPixel[0],\n      cy = _latLngToPixel[1];\n\n  return /*#__PURE__*/React.createElement(\"circle\", _objectSpread2({\n    cx: cx,\n    cy: cy\n  }, props.svgAttributes));\n}\n\nfunction MultiPoint(props) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.coordinates.map(function (point, i) {\n    return /*#__PURE__*/React.createElement(PointComponent, _objectSpread2(_objectSpread2({}, props), {}, {\n      coordinates: point,\n      key: i\n    }));\n  }));\n}\n\nfunction LineString(props) {\n  var latLngToPixel = props.latLngToPixel;\n  var p = 'M' + props.coordinates.reduce(function (a, _ref) {\n    var y = _ref[0],\n        x = _ref[1];\n\n    var _latLngToPixel2 = latLngToPixel([x, y]),\n        v = _latLngToPixel2[0],\n        w = _latLngToPixel2[1];\n\n    return a + ' ' + v + ' ' + w;\n  }, '');\n  return /*#__PURE__*/React.createElement(\"path\", _objectSpread2({\n    d: p\n  }, props.svgAttributes));\n}\n\nfunction MultiLineString(props) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.coordinates.map(function (line, i) {\n    return /*#__PURE__*/React.createElement(LineString, {\n      coordinates: line,\n      key: i\n    });\n  }));\n}\n\nfunction Polygon(props) {\n  var latLngToPixel = props.latLngToPixel;\n  var p = props.coordinates.reduce(function (a, part) {\n    return a + ' M' + part.reduce(function (a, _ref2) {\n      var y = _ref2[0],\n          x = _ref2[1];\n\n      var _latLngToPixel3 = latLngToPixel([x, y]),\n          v = _latLngToPixel3[0],\n          w = _latLngToPixel3[1];\n\n      return a + ' ' + v + ' ' + w;\n    }, '') + 'Z';\n  }, '');\n  return /*#__PURE__*/React.createElement(\"path\", _objectSpread2({\n    d: p\n  }, props.svgAttributes));\n}\n\nfunction MultiPolygon(props) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.coordinates.map(function (polygon, i) {\n    return /*#__PURE__*/React.createElement(Polygon, _objectSpread2(_objectSpread2({}, props), {}, {\n      coordinates: polygon,\n      key: i\n    }));\n  }));\n}\n\nfunction GeometryCollection(props) {\n  var renderer = {\n    Point: PointComponent,\n    MultiPoint: MultiPoint,\n    LineString: LineString,\n    MultiLineString: MultiLineString,\n    Polygon: Polygon,\n    MultiPolygon: MultiPolygon\n  };\n  var _props$geometry = props.geometry,\n      type = _props$geometry.type,\n      coordinates = _props$geometry.coordinates,\n      geometries = _props$geometry.geometries;\n\n  if (type === 'GeometryCollection') {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, geometries.map(function (geometry, i) {\n      return /*#__PURE__*/React.createElement(GeometryCollection, _objectSpread2(_objectSpread2({\n        key: i\n      }, props), {}, {\n        geometry: geometry\n      }));\n    }));\n  }\n\n  var Component = renderer[type];\n\n  if (Component === undefined) {\n    console.warn(\"The GeoJson Type \" + type + \" is not known\");\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Component, {\n    latLngToPixel: props.latLngToPixel,\n    geometry: props.geometry,\n    coordinates: coordinates,\n    svgAttributes: props.svgAttributes\n  });\n}\n\nfunction GeoJsonFeature(props) {\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = props.hover !== undefined ? props.hover : internalHover;\n  var callbackSvgAttributes = props.styleCallback && props.styleCallback(props.feature, hover);\n  var svgAttributes = callbackSvgAttributes ? props.svgAttributes ? _objectSpread2(_objectSpread2({}, props.svgAttributes), callbackSvgAttributes) : callbackSvgAttributes : props.svgAttributes ? props.svgAttributes : defaultSvgAttributes;\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.feature\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"g\", {\n    clipRule: \"evenodd\",\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(GeometryCollection, _objectSpread2(_objectSpread2(_objectSpread2({}, props), props.feature), {}, {\n    svgAttributes: svgAttributes\n  })));\n}\n\nfunction GeoJson(props) {\n  var _props$mapState = props.mapState,\n      width = _props$mapState.width,\n      height = _props$mapState.height;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      left: '0',\n      top: '0',\n      pointerEvents: 'none',\n      cursor: 'pointer'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 \" + width + \" \" + height,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props.data && props.data.features.map(function (feature, i) {\n    return /*#__PURE__*/React.createElement(GeoJsonFeature, _objectSpread2(_objectSpread2({\n      key: i\n    }, props), {}, {\n      feature: feature\n    }));\n  }), React.Children.map(props.children, function (child) {\n    if (!child) {\n      return null;\n    }\n\n    if (! /*#__PURE__*/React.isValidElement(child)) {\n      return child;\n    }\n\n    return /*#__PURE__*/React.cloneElement(child, props);\n  })));\n}\n\nfunction GeoJsonLoader(props) {\n  var _useState2 = useState(props.data ? props.data : null),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    fetch(props.link).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return setData(data);\n    });\n  }, [props.link]);\n  return data ? /*#__PURE__*/React.createElement(GeoJson, _objectSpread2({\n    data: data\n  }, props)) : null;\n}\n\nfunction isDescendentOf(element, ancestor) {\n  while (element) {\n    if (element === ancestor) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nvar defaultState = {\n  isDragging: false,\n  startX: undefined,\n  startY: undefined,\n  startLeft: undefined,\n  startTop: undefined,\n  deltaX: 0,\n  deltaY: 0\n};\n\nfunction Draggable(props) {\n  var dragRef = useRef();\n  var propsRef = useRef(props);\n  var stateRef = useRef(_objectSpread2({}, defaultState));\n\n  var _useState = useState(defaultState),\n      _state = _useState[0],\n      _setState = _useState[1];\n\n  propsRef.current = props;\n\n  var setState = function setState(stateUpdate) {\n    var newState = _objectSpread2(_objectSpread2({}, stateRef.current), stateUpdate);\n\n    stateRef.current = newState;\n\n    _setState(newState);\n  };\n\n  var _props$mapProps = props.mapProps,\n      mouseEvents = _props$mapProps.mouseEvents,\n      touchEvents = _props$mapProps.touchEvents;\n  useEffect(function () {\n    var handleDragStart = function handleDragStart(event) {\n      if (isDescendentOf(event.target, dragRef.current)) {\n        event.preventDefault();\n        setState({\n          isDragging: true,\n          startX: ('touches' in event ? event.touches[0] : event).clientX,\n          startY: ('touches' in event ? event.touches[0] : event).clientY,\n          startLeft: propsRef.current.left,\n          startTop: propsRef.current.top,\n          deltaX: 0,\n          deltaY: 0\n        });\n\n        if (propsRef.current.onDragStart) {\n          var _propsRef$current = propsRef.current,\n              _left = _propsRef$current.left,\n              _top = _propsRef$current.top,\n              offset = _propsRef$current.offset,\n              pixelToLatLng = _propsRef$current.pixelToLatLng;\n          propsRef.current.onDragMove(pixelToLatLng([_left + (offset ? offset[0] : 0), _top + (offset ? offset[1] : 0)]));\n        }\n      }\n    };\n\n    var handleDragMove = function handleDragMove(event) {\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var x = ('touches' in event ? event.touches[0] : event).clientX;\n      var y = ('touches' in event ? event.touches[0] : event).clientY;\n      var deltaX = x - stateRef.current.startX;\n      var deltaY = y - stateRef.current.startY;\n      setState({\n        deltaX: deltaX,\n        deltaY: deltaY\n      });\n\n      if (propsRef.current.onDragMove) {\n        var _propsRef$current2 = propsRef.current,\n            offset = _propsRef$current2.offset,\n            pixelToLatLng = _propsRef$current2.pixelToLatLng;\n        var _stateRef$current = stateRef.current,\n            _startLeft = _stateRef$current.startLeft,\n            _startTop = _stateRef$current.startTop;\n        propsRef.current.onDragMove(pixelToLatLng([_startLeft + deltaX + (offset ? offset[0] : 0), _startTop + deltaY + (offset ? offset[1] : 0)]));\n      }\n    };\n\n    var handleDragEnd = function handleDragEnd(event) {\n      var _propsRef$current$onD, _propsRef$current4;\n\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var _propsRef$current3 = propsRef.current,\n          offset = _propsRef$current3.offset,\n          pixelToLatLng = _propsRef$current3.pixelToLatLng;\n      var _stateRef$current2 = stateRef.current,\n          deltaX = _stateRef$current2.deltaX,\n          deltaY = _stateRef$current2.deltaY,\n          startLeft = _stateRef$current2.startLeft,\n          startTop = _stateRef$current2.startTop;\n      (_propsRef$current$onD = (_propsRef$current4 = propsRef.current).onDragEnd) === null || _propsRef$current$onD === void 0 ? void 0 : _propsRef$current$onD.call(_propsRef$current4, pixelToLatLng([startLeft + deltaX + (offset ? offset[0] : 0), startTop + deltaY + (offset ? offset[1] : 0)]));\n      setState({\n        isDragging: false,\n        startX: undefined,\n        startY: undefined,\n        startLeft: undefined,\n        startTop: undefined,\n        deltaX: 0,\n        deltaY: 0\n      });\n    };\n\n    var wa = function wa(e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n\n    var wr = function wr(e, t) {\n      return window.removeEventListener(e, t);\n    };\n\n    if (mouseEvents) {\n      wa('mousedown', handleDragStart);\n      wa('mousemove', handleDragMove);\n      wa('mouseup', handleDragEnd);\n    }\n\n    if (touchEvents) {\n      wa('touchstart', handleDragStart, {\n        passive: false\n      });\n      wa('touchmove', handleDragMove, {\n        passive: false\n      });\n      wa('touchend', handleDragEnd, {\n        passive: false\n      });\n    }\n\n    return function () {\n      if (mouseEvents) {\n        wr('mousedown', handleDragStart);\n        wr('mousemove', handleDragMove);\n        wr('mouseup', handleDragEnd);\n      }\n\n      if (touchEvents) {\n        wr('touchstart', handleDragStart);\n        wr('touchmove', handleDragMove);\n        wr('touchend', handleDragEnd);\n      }\n    };\n  }, [mouseEvents, touchEvents]);\n  var left = props.left,\n      top = props.top,\n      className = props.className,\n      style = props.style;\n  var deltaX = _state.deltaX,\n      deltaY = _state.deltaY,\n      startLeft = _state.startLeft,\n      startTop = _state.startTop,\n      isDragging = _state.isDragging;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2(_objectSpread2({\n      cursor: isDragging ? 'grabbing' : 'grab'\n    }, style || {}), {}, {\n      position: 'absolute',\n      transform: \"translate(\" + (isDragging ? startLeft + deltaX : left) + \"px, \" + (isDragging ? startTop + deltaY : top) + \"px)\"\n    }),\n    ref: dragRef,\n    className: \"pigeon-drag-block\" + (className ? \" \" + className : '')\n  }, props.children);\n}\n\nvar commonStyle = {\n  position: 'absolute',\n  top: 10,\n  left: 10\n};\nvar commonButtonStyle = {\n  width: 28,\n  height: 28,\n  borderRadius: 2,\n  boxShadow: '0 1px 4px -1px rgba(0,0,0,.3)',\n  background: 'white',\n  lineHeight: '26px',\n  fontSize: '20px',\n  fontWeight: 700,\n  color: '#666',\n  marginBottom: 1,\n  cursor: 'pointer',\n  border: 'none',\n  display: 'block',\n  outline: 'none'\n};\n\nfunction ZoomControl(_ref) {\n  var style = _ref.style,\n      buttonStyle = _ref.buttonStyle,\n      setCenterZoom = _ref.setCenterZoom,\n      mapState = _ref.mapState,\n      mapProps = _ref.mapProps;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pigeon-zoom-buttons pigeon-drag-block\",\n    style: style ? _objectSpread2(_objectSpread2({}, commonStyle), style) : commonStyle\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-in\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.min(mapState.zoom + 1, mapProps.maxZoom));\n    }\n  }, \"+\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-out\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.max(mapState.zoom - 1, mapProps.minZoom));\n    }\n  }, \"\\u2013\"));\n}\n\nexport { Draggable, GeoJson, GeoJsonFeature, GeoJsonLoader, Map, Marker, Overlay, ZoomControl };","map":{"version":3,"sources":["/home/douglas/Projetos Trybe/Diversos/iss_location/node_modules/pigeon-maps/lib/index.esm.js"],"names":["React","Component","useState","useEffect","useRef","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","debounce","func","wait","timeout","_len","args","Array","_key","context","clearTimeout","setTimeout","parentHasClass","element","className","classList","contains","parentElement","parentPosition","rect","getBoundingClientRect","x","left","y","top","osm","z","s","String","fromCharCode","ANIMATION_TIME","DIAGONAL_THROW_TIME","SCROLL_PIXELS_FOR_ZOOM_LEVEL","MIN_DRAG_FOR_THROW","CLICK_TOLERANCE","DOUBLE_CLICK_DELAY","DEBOUNCE_DELAY","PINCH_RELEASE_THROW_DELAY","WARNING_DISPLAY_TIMEOUT","NOOP","lng2tile","lon","zoom","Math","pow","lat2tile","lat","log","tan","PI","cos","tile2lng","tile2lat","n","atan","exp","getMousePixel","dom","event","parent","clientX","clientY","easeOutQuad","t","absoluteMinMax","hasWindow","window","performanceNow","performance","now","timeStart","Date","getTime","requestAnimationFrame","callback","cancelAnimationFrame","animFrame","srcSet","dprs","url","map","dpr","join","ImgTile","_ref","tile","tileLoaded","createElement","src","width","height","loading","onLoad","alt","style","position","willChange","transformOrigin","opacity","Map","_Component","props","_ref2","_props$defaultZoom","_ref3","_props$defaultCenter","_ref4","_props$width","_ref5","_props$height","_this","call","_containerRef","setState","_window","addEventListener","_window2","removeEventListener","wa","handleMouseDown","handleMouseUp","handleMouseMove","handleTouchStart","passive","handleTouchMove","handleTouchEnd","wr","updateWidthHeight","handleWheel","center","fromProps","zoomAround","animationDuration","animate","distanceInScreens","state","animateMaxScreens","_isAnimating","_animFrame","_this$animationStep","animationStep","centerStep","zoomStep","_centerStart","_zoomStart","limitCenterAtZoom","_lastCenter","_lastZoom","onAnimationStart","_animationStart","_animationEnd","_zoomAround","_centerTarget","calculateZoomCenter","_zoomTarget","stopAnimating","_center","setCenterZoom","setCenterZoomTarget","centerTarget","zoomTarget","_this$state","l1","latLngToPixel","l2","z1","z2","w","abs","h","sqrt","timestamp","progress","max","percentage","zoomDiff","_centerStep","onAnimationStop","_this$animationStep2","minMax","getBoundsMinMax","min","isNaN","animationEnded","limitedCenter","round","tileValues","nextValues","oldTiles","roundedZoom","concat","loadTracker","tileMinX","tileMaxX","tileMinY","tileMaxY","_loadTracker","maybeZoom","maybeCenter","syncToProps","limitBounds","_this$state2","_minMaxCache","pixelsAtZoom","minLng","minLat","maxLng","maxLat","unloadedCount","values","v","touches","touch","pixel","coordsInside","_touchStartPixel","twoFingerDrag","_lastTap","preventDefault","latLngNow","pixelToLatLng","minZoom","maxZoom","trackMoveEvents","stopTrackingMoveEvents","pixelDelta","zoomDelta","sendDeltaChange","t1","t2","_touchStartMidPoint","_touchStartDistance","showWarning","_this$state3","midPoint","midPointDiff","distance","log2","scale","centerDiffDiff","_this$props","zoomSnap","_this$sendDeltaChange","clearWarning","oldTouchPixel","newTouchPixel","changedTouches","_secondTouchEnd","throwAfterMoving","latLng","ceil","floor","_zoom","button","_lastClick","_mousePosition","_mouseDown","_dragStart","onClick","undefined","_this$sendDeltaChange2","_moveEvents","coords","shift","_this$state4","lastEvent","deltaMs","delta","diagonal","throwTime","lng","_this$state5","zoomPlusDelta","_this$state6","ne","sw","onBoundsChanged","bounds","getBounds","initial","_boundsSynced","_this$props2","mouseEvents","metaWheelZoom","metaKey","ctrlKey","addToZoom","deltaY","stillToAdd","zoomAroundMouse","_lastWheel","warningType","_warningClearTimeout","_this$props3","_this$state7","pointDiff","tileX","tileY","_this$state8","tileCenterX","tileCenterY","oldZoom","newZoom","_this$state9","pixelBefore","pixelAfter","newCenter","defaultZoom","defaultCenter","defaultWidth","defaultHeight","_proto","componentDidMount","_this2","bindMouseEvents","touchEvents","bindTouchEvents","bindResizeEvent","bindWheelEvent","ResizeObserver","_resizeObserver","observe","componentWillUnmount","unbindMouseEvents","unbindTouchEvents","unbindWheelEvent","unbindResizeEvent","disconnect","componentDidUpdate","prevProps","_prevProps$center","currentCenter","currentZoom","_this$props$center","_this$props$zoom","nextCenter","nextZoom","_this$state10","pos","document","elementFromPoint","_ref6","scaleWidth","scaleHeight","halfWidth","halfHeight","renderTiles","_this3","_this$state11","mapUrl","provider","_this$tileValues","tiles","old","xDiff","yDiff","_xMin","_yMin","_xMax","_yMax","active","xMin","yMin","xMax","yMax","_x","_y","boxStyle","overflow","transform","boxClassname","tilesStyle","Tile","tileComponent","renderOverlays","_this4","_this$state12","mapState","childrenWithProps","Children","children","child","isValidElement","_child$props","anchor","offset","c","cloneElement","setCenterZoomForChildren","mapProps","childrenStyle","renderAttribution","_this$props4","attribution","attributionPrefix","bottom","right","fontSize","padding","background","fontFamily","color","linkStyle","textDecoration","href","rel","renderWarning","_this$props5","metaWheelZoomWarning","twoFingerDragWarning","warningZIndex","_this$state13","pointerEvents","transition","display","justifyContent","alignItems","textAlign","zIndex","meta","navigator","platform","toUpperCase","indexOf","warningText","replace","render","_this$props6","_this$state14","containerStyle","touchAction","hasSize","ref","setRef","Marker","_useState","hover","internalHover","setInternalHover","eventParameters","payload","cursor","viewBox","fill","xmlns","onContextMenu","onMouseOver","onMouseOut","d","stroke","strokeWidth","cx","cy","r","Overlay","defaultSvgAttributes","PointComponent","_props$coordinates","coordinates","_latLngToPixel","svgAttributes","MultiPoint","Fragment","point","LineString","reduce","a","_latLngToPixel2","MultiLineString","line","Polygon","part","_latLngToPixel3","MultiPolygon","polygon","GeometryCollection","renderer","Point","_props$geometry","geometry","type","geometries","console","warn","GeoJsonFeature","callbackSvgAttributes","styleCallback","feature","clipRule","GeoJson","_props$mapState","data","features","GeoJsonLoader","_useState2","setData","fetch","link","then","response","json","isDescendentOf","ancestor","defaultState","isDragging","startX","startY","startLeft","startTop","deltaX","Draggable","dragRef","propsRef","stateRef","_state","_setState","current","stateUpdate","newState","_props$mapProps","handleDragStart","onDragStart","_propsRef$current","_left","_top","onDragMove","handleDragMove","_propsRef$current2","_stateRef$current","_startLeft","_startTop","handleDragEnd","_propsRef$current$onD","_propsRef$current4","_propsRef$current3","_stateRef$current2","onDragEnd","e","commonStyle","commonButtonStyle","borderRadius","boxShadow","lineHeight","fontWeight","marginBottom","border","outline","ZoomControl","buttonStyle"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect, useRef } from 'react';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\n\nfunction osm(x, y, z) {\n  var s = String.fromCharCode(97 + (x + y + z) % 3);\n  return \"https://\" + s + \".tile.openstreetmap.org/\" + z + \"/\" + x + \"/\" + y + \".png\";\n}\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {\n  return true;\n};\n\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\n\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = function requestAnimationFrame(callback) {\n  if (hasWindow) {\n    return (window.requestAnimationFrame || window.setTimeout)(callback);\n  } else {\n    callback(new Date().getTime());\n    return null;\n  }\n};\n\nvar cancelAnimationFrame = function cancelAnimationFrame(animFrame) {\n  return hasWindow && animFrame ? (window.cancelAnimationFrame || window.clearTimeout)(animFrame) : false;\n};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : \" \" + dpr + \"x\");\n  }).join(', ');\n}\n\nvar ImgTile = function ImgTile(_ref) {\n  var tile = _ref.tile,\n      tileLoaded = _ref.tileLoaded;\n  return /*#__PURE__*/React.createElement(\"img\", {\n    src: tile.url,\n    srcSet: tile.srcSet,\n    width: tile.width,\n    height: tile.height,\n    loading: 'lazy',\n    onLoad: tileLoaded,\n    alt: '',\n    style: {\n      position: 'absolute',\n      left: tile.left,\n      top: tile.top,\n      willChange: 'transform',\n      transformOrigin: 'top left',\n      opacity: 1\n    }\n  });\n};\n\nvar Map = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Map, _Component);\n\n  function Map(props) {\n    var _ref2, _props$defaultZoom, _ref3, _props$defaultCenter, _ref4, _props$width, _ref5, _props$height;\n\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"_containerRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mousePosition\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_loadTracker\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_dragStart\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mouseDown\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_moveEvents\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastClick\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastTap\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastWheel\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_touchStartPixel\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_touchStartMidPoint\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_touchStartDistance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_secondTouchEnd\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_warningClearTimeout\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_isAnimating\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_animationStart\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_animationEnd\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomStart\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_centerTarget\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomTarget\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_zoomAround\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_animFrame\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_boundsSynced\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_minMaxCache\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastZoom\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastCenter\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_centerStart\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_resizeObserver\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"updateWidthHeight\", function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n\n          return true;\n        }\n      }\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"wa\", function () {\n      var _window;\n\n      return (_window = window).addEventListener.apply(_window, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"wr\", function () {\n      var _window2;\n\n      return (_window2 = window).removeEventListener.apply(_window2, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindMouseEvents\", function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n\n      _this.wa('mouseup', _this.handleMouseUp);\n\n      _this.wa('mousemove', _this.handleMouseMove);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindTouchEvents\", function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindMouseEvents\", function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n\n      _this.wr('mouseup', _this.handleMouseUp);\n\n      _this.wr('mousemove', _this.handleMouseMove);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindTouchEvents\", function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n\n      _this.wr('touchmove', _this.handleTouchMove);\n\n      _this.wr('touchend', _this.handleTouchEnd);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindResizeEvent\", function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindResizeEvent\", function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindWheelEvent\", function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unbindWheelEvent\", function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCenterZoomTarget\", function (center, zoom, fromProps, zoomAround, animationDuration) {\n      if (fromProps === void 0) {\n        fromProps = false;\n      }\n\n      if (zoomAround === void 0) {\n        zoomAround = null;\n      }\n\n      if (animationDuration === void 0) {\n        animationDuration = ANIMATION_TIME;\n      }\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center || _this.state.center, zoom, fromProps);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCenterZoomForChildren\", function (center, zoom) {\n      _this.setCenterZoomTarget(center || _this.state.center, zoom || _this.state.zoom, true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"distanceInScreens\", function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n      return Math.sqrt(w * w + h * h);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"animationStep\", function (timestamp) {\n      if (!_this._animationEnd || !_this._animationStart || !_this._zoomTarget || !_this._zoomStart || !_this._centerStart || !_this._centerTarget) {\n        return {\n          centerStep: _this.state.center,\n          zoomStep: _this.state.zoom\n        };\n      }\n\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"animate\", function (timestamp) {\n      if (!_this._animationEnd || timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopAnimating\", function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n\n        _this.onAnimationStop();\n\n        cancelAnimationFrame(_this._animFrame);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"limitCenterAtZoom\", function (center, zoom) {\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(!center || isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(!center || isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAnimationStart\", function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAnimationStop\", function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCenterZoom\", function (center, zoom, animationEnded) {\n      if (animationEnded === void 0) {\n        animationEnded = false;\n      }\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (zoom && Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + \"-\" + y + \"-\" + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom || _this.state.zoom\n      }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n\n      if (zoom && (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001)) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBoundsMinMax\", function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom);\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom);\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom);\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom);\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"tileLoaded\", function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.values(_this._loadTracker).filter(function (v) {\n          return !v;\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchStart\", function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchMove\", function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel && _this._touchStartMidPoint && _this._touchStartDistance) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTouchEnd\", function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget;\n\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseDown\", function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          if (!parentHasClass(event.target, 'pigeon-click-block')) {\n            var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n\n            _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n          }\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseMove\", function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseUp\", function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n\n      var pixelDelta = _this.state.pixelDelta;\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n\n          _this.setState({\n            pixelDelta: undefined\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopTrackingMoveEvents\", function () {\n      _this._moveEvents = [];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"trackMoveEvents\", function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"throwAfterMoving\", function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"sendDeltaChange\", function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: undefined,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBounds\", function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"syncToProps\", function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.state.zoom;\n      }\n\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheel\", function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey || event.ctrlKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showWarning\", function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearWarning\", function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomAroundMouse\", function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomPlusDelta\", function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pixelToLatLng\", function (pixel, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"latLngToPixel\", function (latLng, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"calculateZoomCenter\", function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRef\", function (dom) {\n      _this._containerRef = dom;\n    });\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._lastZoom = (_ref2 = (_props$defaultZoom = props.defaultZoom) !== null && _props$defaultZoom !== void 0 ? _props$defaultZoom : props.zoom) !== null && _ref2 !== void 0 ? _ref2 : 14;\n    _this._lastCenter = (_ref3 = (_props$defaultCenter = props.defaultCenter) !== null && _props$defaultCenter !== void 0 ? _props$defaultCenter : props.center) !== null && _ref3 !== void 0 ? _ref3 : [0, 0];\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: (_ref4 = (_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : props.defaultWidth) !== null && _ref4 !== void 0 ? _ref4 : -1,\n      height: (_ref5 = (_props$height = props.height) !== null && _props$height !== void 0 ? _props$height : props.defaultHeight) !== null && _ref5 !== void 0 ? _ref5 : -1,\n      zoomDelta: 0,\n      pixelDelta: undefined,\n      oldTiles: [],\n      showWarning: false,\n      warningType: undefined\n    };\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n\n      this.bindResizeEvent();\n    }\n\n    this.bindWheelEvent();\n    this.syncToProps();\n\n    if (typeof window.ResizeObserver !== 'undefined') {\n      this._resizeObserver = new window.ResizeObserver(function () {\n        _this2.updateWidthHeight();\n      });\n\n      this._resizeObserver.observe(this._containerRef);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n    this.unbindWheelEvent();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _prevProps$center;\n\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      return;\n    }\n\n    if ((!this.props.center || this.props.center[0] === (prevProps === null || prevProps === void 0 ? void 0 : (_prevProps$center = prevProps.center) === null || _prevProps$center === void 0 ? void 0 : _prevProps$center[0]) && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    if (currentCenter && currentZoom) {\n      var _this$props$center, _this$props$zoom;\n\n      var nextCenter = (_this$props$center = this.props.center) !== null && _this$props$center !== void 0 ? _this$props$center : currentCenter;\n      var nextZoom = (_this$props$zoom = this.props.zoom) !== null && _this$props$zoom !== void 0 ? _this$props$zoom : currentZoom;\n\n      if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n        this.setCenterZoomTarget(nextCenter, nextZoom, true);\n      }\n    }\n  };\n\n  _proto.coordsInside = function coordsInside(pixel) {\n    var _this$state10 = this.state,\n        width = _this$state10.width,\n        height = _this$state10.height;\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n\n    if (parent) {\n      var pos = parentPosition(parent);\n      var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n      return parent === element || parent.contains(element);\n    } else {\n      return false;\n    }\n  };\n\n  _proto.tileValues = function tileValues(_ref6) {\n    var center = _ref6.center,\n        zoom = _ref6.zoom,\n        pixelDelta = _ref6.pixelDelta,\n        zoomDelta = _ref6.zoomDelta,\n        width = _ref6.width,\n        height = _ref6.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  _proto.renderTiles = function renderTiles() {\n    var _this3 = this;\n\n    var _this$state11 = this.state,\n        oldTiles = _this$state11.oldTiles,\n        width = _this$state11.width,\n        height = _this$state11.height;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || osm;\n\n    var _this$tileValues = this.tileValues(this.state),\n        tileMinX = _this$tileValues.tileMinX,\n        tileMaxX = _this$tileValues.tileMaxX,\n        tileMinY = _this$tileValues.tileMinY,\n        tileMaxY = _this$tileValues.tileMaxY,\n        tileCenterX = _this$tileValues.tileCenterX,\n        tileCenterY = _this$tileValues.tileCenterY,\n        roundedZoom = _this$tileValues.roundedZoom,\n        scaleWidth = _this$tileValues.scaleWidth,\n        scaleHeight = _this$tileValues.scaleHeight,\n        scale = _this$tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n\n      var _yMin = Math.max(old.tileMinY, 0);\n\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + \"-\" + y + \"-\" + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x = xMin; _x <= xMax; _x++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x + \"-\" + _y + \"-\" + roundedZoom,\n          url: mapUrl(_x, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x, _y, roundedZoom),\n          left: (_x - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\",\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: \"scale(\" + scale + \", \" + scale + \")\",\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || 'pigeon-tiles-box';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: \"translate(\" + left + \"px, \" + top + \"px)\"\n    };\n    var Tile = this.props.tileComponent;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: boxStyle,\n      className: boxClassname\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-tiles\",\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return /*#__PURE__*/React.createElement(Tile, {\n        key: tile.key,\n        tile: tile,\n        tileLoaded: function tileLoaded() {\n          return _this3.tileLoaded(tile.key);\n        }\n      });\n    })));\n  };\n\n  _proto.renderOverlays = function renderOverlays() {\n    var _this4 = this;\n\n    var _this$state12 = this.state,\n        width = _this$state12.width,\n        height = _this$state12.height,\n        center = _this$state12.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (! /*#__PURE__*/React.isValidElement(child)) {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n      var c = _this4.latLngToPixel(anchor || position || center);\n\n      return /*#__PURE__*/React.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this4.latLngToPixel,\n        pixelToLatLng: _this4.pixelToLatLng,\n        setCenterZoom: _this4.setCenterZoomForChildren,\n        mapProps: _this4.props,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-overlays\",\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n\n  _proto.renderAttribution = function renderAttribution() {\n    var _this$props4 = this.props,\n        attribution = _this$props4.attribution,\n        attributionPrefix = _this$props4.attributionPrefix;\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"attr\",\n      className: \"pigeon-attribution\",\n      style: style\n    }, attributionPrefix === false ? null : /*#__PURE__*/React.createElement(\"span\", null, attributionPrefix || /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://pigeon-maps.js.org/\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"Pigeon\"), ' | '), attribution || /*#__PURE__*/React.createElement(\"span\", null, '  ', /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.openstreetmap.org/copyright\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"OpenStreetMap\"), ' contributors'));\n  };\n\n  _proto.renderWarning = function renderWarning() {\n    var _this$props5 = this.props,\n        metaWheelZoom = _this$props5.metaWheelZoom,\n        metaWheelZoomWarning = _this$props5.metaWheelZoomWarning,\n        twoFingerDrag = _this$props5.twoFingerDrag,\n        twoFingerDragWarning = _this$props5.twoFingerDragWarning,\n        warningZIndex = _this$props5.warningZIndex;\n    var _this$state13 = this.state,\n        showWarning = _this$state13.showWarning,\n        warningType = _this$state13.warningType,\n        width = _this$state13.width,\n        height = _this$state13.height;\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '' : 'ctrl';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pigeon-overlay-warning\",\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        touchEvents = _this$props6.touchEvents,\n        twoFingerDrag = _this$props6.twoFingerDrag;\n    var _this$state14 = this.state,\n        width = _this$state14.width,\n        height = _this$state14.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n\n  return Map;\n}(Component);\n\n_defineProperty(Map, \"defaultProps\", {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META + wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: [],\n  tileComponent: ImgTile\n});\n\nfunction Marker(props) {\n  var width = typeof props.width !== 'undefined' ? props.width : typeof props.height !== 'undefined' ? props.height * 29 / 34 : 29;\n  var height = typeof props.height !== 'undefined' ? props.height : typeof props.width !== 'undefined' ? props.width * 34 / 29 : 34;\n\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = typeof props.hover === 'undefined' ? internalHover : props.hover;\n  var color = props.color || '#93C0D0';\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.payload\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + (props.left - width / 2) + \"px, \" + (props.top - (height - 1)) + \"px)\",\n      filter: hover ? 'drop-shadow(0 0 4px rgba(0, 0, 0, .3))' : '',\n      pointerEvents: 'none',\n      cursor: 'pointer'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 61 71\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z\",\n    fill: color,\n    stroke: \"white\",\n    strokeWidth: \"4\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"30.5\",\n    cy: \"30.5\",\n    r: \"8.5\",\n    fill: \"white\",\n    opacity: hover ? 0.98 : 0.6\n  }))));\n}\n\nfunction Overlay(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + props.left + \"px, \" + props.top + \"px)\"\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, props.children);\n}\n\nvar defaultSvgAttributes = {\n  fill: '#93c0d099',\n  strokeWidth: '2',\n  stroke: 'white',\n  r: '30'\n};\nfunction PointComponent(props) {\n  var latLngToPixel = props.latLngToPixel;\n  var _props$coordinates = props.coordinates,\n      y = _props$coordinates[0],\n      x = _props$coordinates[1];\n\n  var _latLngToPixel = latLngToPixel([x, y]),\n      cx = _latLngToPixel[0],\n      cy = _latLngToPixel[1];\n\n  return /*#__PURE__*/React.createElement(\"circle\", _objectSpread2({\n    cx: cx,\n    cy: cy\n  }, props.svgAttributes));\n}\nfunction MultiPoint(props) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.coordinates.map(function (point, i) {\n    return /*#__PURE__*/React.createElement(PointComponent, _objectSpread2(_objectSpread2({}, props), {}, {\n      coordinates: point,\n      key: i\n    }));\n  }));\n}\nfunction LineString(props) {\n  var latLngToPixel = props.latLngToPixel;\n  var p = 'M' + props.coordinates.reduce(function (a, _ref) {\n    var y = _ref[0],\n        x = _ref[1];\n\n    var _latLngToPixel2 = latLngToPixel([x, y]),\n        v = _latLngToPixel2[0],\n        w = _latLngToPixel2[1];\n\n    return a + ' ' + v + ' ' + w;\n  }, '');\n  return /*#__PURE__*/React.createElement(\"path\", _objectSpread2({\n    d: p\n  }, props.svgAttributes));\n}\nfunction MultiLineString(props) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.coordinates.map(function (line, i) {\n    return /*#__PURE__*/React.createElement(LineString, {\n      coordinates: line,\n      key: i\n    });\n  }));\n}\nfunction Polygon(props) {\n  var latLngToPixel = props.latLngToPixel;\n  var p = props.coordinates.reduce(function (a, part) {\n    return a + ' M' + part.reduce(function (a, _ref2) {\n      var y = _ref2[0],\n          x = _ref2[1];\n\n      var _latLngToPixel3 = latLngToPixel([x, y]),\n          v = _latLngToPixel3[0],\n          w = _latLngToPixel3[1];\n\n      return a + ' ' + v + ' ' + w;\n    }, '') + 'Z';\n  }, '');\n  return /*#__PURE__*/React.createElement(\"path\", _objectSpread2({\n    d: p\n  }, props.svgAttributes));\n}\nfunction MultiPolygon(props) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.coordinates.map(function (polygon, i) {\n    return /*#__PURE__*/React.createElement(Polygon, _objectSpread2(_objectSpread2({}, props), {}, {\n      coordinates: polygon,\n      key: i\n    }));\n  }));\n}\nfunction GeometryCollection(props) {\n  var renderer = {\n    Point: PointComponent,\n    MultiPoint: MultiPoint,\n    LineString: LineString,\n    MultiLineString: MultiLineString,\n    Polygon: Polygon,\n    MultiPolygon: MultiPolygon\n  };\n  var _props$geometry = props.geometry,\n      type = _props$geometry.type,\n      coordinates = _props$geometry.coordinates,\n      geometries = _props$geometry.geometries;\n\n  if (type === 'GeometryCollection') {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, geometries.map(function (geometry, i) {\n      return /*#__PURE__*/React.createElement(GeometryCollection, _objectSpread2(_objectSpread2({\n        key: i\n      }, props), {}, {\n        geometry: geometry\n      }));\n    }));\n  }\n\n  var Component = renderer[type];\n\n  if (Component === undefined) {\n    console.warn(\"The GeoJson Type \" + type + \" is not known\");\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Component, {\n    latLngToPixel: props.latLngToPixel,\n    geometry: props.geometry,\n    coordinates: coordinates,\n    svgAttributes: props.svgAttributes\n  });\n}\nfunction GeoJsonFeature(props) {\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = props.hover !== undefined ? props.hover : internalHover;\n  var callbackSvgAttributes = props.styleCallback && props.styleCallback(props.feature, hover);\n  var svgAttributes = callbackSvgAttributes ? props.svgAttributes ? _objectSpread2(_objectSpread2({}, props.svgAttributes), callbackSvgAttributes) : callbackSvgAttributes : props.svgAttributes ? props.svgAttributes : defaultSvgAttributes;\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.feature\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"g\", {\n    clipRule: \"evenodd\",\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(GeometryCollection, _objectSpread2(_objectSpread2(_objectSpread2({}, props), props.feature), {}, {\n    svgAttributes: svgAttributes\n  })));\n}\nfunction GeoJson(props) {\n  var _props$mapState = props.mapState,\n      width = _props$mapState.width,\n      height = _props$mapState.height;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      left: '0',\n      top: '0',\n      pointerEvents: 'none',\n      cursor: 'pointer'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 \" + width + \" \" + height,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props.data && props.data.features.map(function (feature, i) {\n    return /*#__PURE__*/React.createElement(GeoJsonFeature, _objectSpread2(_objectSpread2({\n      key: i\n    }, props), {}, {\n      feature: feature\n    }));\n  }), React.Children.map(props.children, function (child) {\n    if (!child) {\n      return null;\n    }\n\n    if (! /*#__PURE__*/React.isValidElement(child)) {\n      return child;\n    }\n\n    return /*#__PURE__*/React.cloneElement(child, props);\n  })));\n}\nfunction GeoJsonLoader(props) {\n  var _useState2 = useState(props.data ? props.data : null),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    fetch(props.link).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return setData(data);\n    });\n  }, [props.link]);\n  return data ? /*#__PURE__*/React.createElement(GeoJson, _objectSpread2({\n    data: data\n  }, props)) : null;\n}\n\nfunction isDescendentOf(element, ancestor) {\n  while (element) {\n    if (element === ancestor) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nvar defaultState = {\n  isDragging: false,\n  startX: undefined,\n  startY: undefined,\n  startLeft: undefined,\n  startTop: undefined,\n  deltaX: 0,\n  deltaY: 0\n};\nfunction Draggable(props) {\n  var dragRef = useRef();\n  var propsRef = useRef(props);\n  var stateRef = useRef(_objectSpread2({}, defaultState));\n\n  var _useState = useState(defaultState),\n      _state = _useState[0],\n      _setState = _useState[1];\n\n  propsRef.current = props;\n\n  var setState = function setState(stateUpdate) {\n    var newState = _objectSpread2(_objectSpread2({}, stateRef.current), stateUpdate);\n\n    stateRef.current = newState;\n\n    _setState(newState);\n  };\n\n  var _props$mapProps = props.mapProps,\n      mouseEvents = _props$mapProps.mouseEvents,\n      touchEvents = _props$mapProps.touchEvents;\n  useEffect(function () {\n    var handleDragStart = function handleDragStart(event) {\n      if (isDescendentOf(event.target, dragRef.current)) {\n        event.preventDefault();\n        setState({\n          isDragging: true,\n          startX: ('touches' in event ? event.touches[0] : event).clientX,\n          startY: ('touches' in event ? event.touches[0] : event).clientY,\n          startLeft: propsRef.current.left,\n          startTop: propsRef.current.top,\n          deltaX: 0,\n          deltaY: 0\n        });\n\n        if (propsRef.current.onDragStart) {\n          var _propsRef$current = propsRef.current,\n              _left = _propsRef$current.left,\n              _top = _propsRef$current.top,\n              offset = _propsRef$current.offset,\n              pixelToLatLng = _propsRef$current.pixelToLatLng;\n          propsRef.current.onDragMove(pixelToLatLng([_left + (offset ? offset[0] : 0), _top + (offset ? offset[1] : 0)]));\n        }\n      }\n    };\n\n    var handleDragMove = function handleDragMove(event) {\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var x = ('touches' in event ? event.touches[0] : event).clientX;\n      var y = ('touches' in event ? event.touches[0] : event).clientY;\n      var deltaX = x - stateRef.current.startX;\n      var deltaY = y - stateRef.current.startY;\n      setState({\n        deltaX: deltaX,\n        deltaY: deltaY\n      });\n\n      if (propsRef.current.onDragMove) {\n        var _propsRef$current2 = propsRef.current,\n            offset = _propsRef$current2.offset,\n            pixelToLatLng = _propsRef$current2.pixelToLatLng;\n        var _stateRef$current = stateRef.current,\n            _startLeft = _stateRef$current.startLeft,\n            _startTop = _stateRef$current.startTop;\n        propsRef.current.onDragMove(pixelToLatLng([_startLeft + deltaX + (offset ? offset[0] : 0), _startTop + deltaY + (offset ? offset[1] : 0)]));\n      }\n    };\n\n    var handleDragEnd = function handleDragEnd(event) {\n      var _propsRef$current$onD, _propsRef$current4;\n\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var _propsRef$current3 = propsRef.current,\n          offset = _propsRef$current3.offset,\n          pixelToLatLng = _propsRef$current3.pixelToLatLng;\n      var _stateRef$current2 = stateRef.current,\n          deltaX = _stateRef$current2.deltaX,\n          deltaY = _stateRef$current2.deltaY,\n          startLeft = _stateRef$current2.startLeft,\n          startTop = _stateRef$current2.startTop;\n      (_propsRef$current$onD = (_propsRef$current4 = propsRef.current).onDragEnd) === null || _propsRef$current$onD === void 0 ? void 0 : _propsRef$current$onD.call(_propsRef$current4, pixelToLatLng([startLeft + deltaX + (offset ? offset[0] : 0), startTop + deltaY + (offset ? offset[1] : 0)]));\n      setState({\n        isDragging: false,\n        startX: undefined,\n        startY: undefined,\n        startLeft: undefined,\n        startTop: undefined,\n        deltaX: 0,\n        deltaY: 0\n      });\n    };\n\n    var wa = function wa(e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n\n    var wr = function wr(e, t) {\n      return window.removeEventListener(e, t);\n    };\n\n    if (mouseEvents) {\n      wa('mousedown', handleDragStart);\n      wa('mousemove', handleDragMove);\n      wa('mouseup', handleDragEnd);\n    }\n\n    if (touchEvents) {\n      wa('touchstart', handleDragStart, {\n        passive: false\n      });\n      wa('touchmove', handleDragMove, {\n        passive: false\n      });\n      wa('touchend', handleDragEnd, {\n        passive: false\n      });\n    }\n\n    return function () {\n      if (mouseEvents) {\n        wr('mousedown', handleDragStart);\n        wr('mousemove', handleDragMove);\n        wr('mouseup', handleDragEnd);\n      }\n\n      if (touchEvents) {\n        wr('touchstart', handleDragStart);\n        wr('touchmove', handleDragMove);\n        wr('touchend', handleDragEnd);\n      }\n    };\n  }, [mouseEvents, touchEvents]);\n  var left = props.left,\n      top = props.top,\n      className = props.className,\n      style = props.style;\n  var deltaX = _state.deltaX,\n      deltaY = _state.deltaY,\n      startLeft = _state.startLeft,\n      startTop = _state.startTop,\n      isDragging = _state.isDragging;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2(_objectSpread2({\n      cursor: isDragging ? 'grabbing' : 'grab'\n    }, style || {}), {}, {\n      position: 'absolute',\n      transform: \"translate(\" + (isDragging ? startLeft + deltaX : left) + \"px, \" + (isDragging ? startTop + deltaY : top) + \"px)\"\n    }),\n    ref: dragRef,\n    className: \"pigeon-drag-block\" + (className ? \" \" + className : '')\n  }, props.children);\n}\n\nvar commonStyle = {\n  position: 'absolute',\n  top: 10,\n  left: 10\n};\nvar commonButtonStyle = {\n  width: 28,\n  height: 28,\n  borderRadius: 2,\n  boxShadow: '0 1px 4px -1px rgba(0,0,0,.3)',\n  background: 'white',\n  lineHeight: '26px',\n  fontSize: '20px',\n  fontWeight: 700,\n  color: '#666',\n  marginBottom: 1,\n  cursor: 'pointer',\n  border: 'none',\n  display: 'block',\n  outline: 'none'\n};\nfunction ZoomControl(_ref) {\n  var style = _ref.style,\n      buttonStyle = _ref.buttonStyle,\n      setCenterZoom = _ref.setCenterZoom,\n      mapState = _ref.mapState,\n      mapProps = _ref.mapProps;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pigeon-zoom-buttons pigeon-drag-block\",\n    style: style ? _objectSpread2(_objectSpread2({}, commonStyle), style) : commonStyle\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-in\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.min(mapState.zoom + 1, mapProps.maxZoom));\n    }\n  }, \"+\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-out\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.max(mapState.zoom - 1, mapProps.minZoom));\n    }\n  }, \"\\u2013\"));\n}\n\nexport { Draggable, GeoJson, GeoJsonFeature, GeoJsonLoader, Map, Marker, Overlay, ZoomControl };\n"]},"metadata":{},"sourceType":"module"}